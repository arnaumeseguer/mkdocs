{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"Arnau Meseguer Sancho Exercicis Sistemes Inform\u00e0tics. \u00a1Consell! Utilitza l'index per viatjar entre projectes Mkdocs by Arnau Meseguer Sancho is marked with CC0 1.0 Universal","title":"P\u00e0gina Principal"},{"location":"#arnau-meseguer-sancho","text":"Exercicis Sistemes Inform\u00e0tics.","title":"Arnau Meseguer Sancho"},{"location":"#consell","text":"Utilitza l'index per viatjar entre projectes Mkdocs by Arnau Meseguer Sancho is marked with CC0 1.0 Universal","title":"\u00a1Consell!"},{"location":"Sprint2/","text":"Sprint2 Gesti\u00f3 de la Informaci\u00f3 del Sistema i Administraci\u00f3 Qu\u00e8 \u00e9s un usuari? Un usuari \u00e9s una entitat l\u00f2gica creada per gestionar els permisos, l'acc\u00e9s i les accions en un sistema operatiu o aplicaci\u00f3. Gr\u00e0ficament no pot treballar m\u00e9s d\u2019un usuari, per\u00f2 amb terminals si. Qu\u00e8 son els grups i quina utilitat tenen. \u00c9s una col\u00b7lecci\u00f3 d\u2019usuaris que comparteixen permisos i/o privilegis. serveixen per donar/llevar permisos a un grup d\u2019usuaris enlloc de fer-ho un per un. Per exemple, tots els usuaris del grup \u201csudoers\u201d poden utilitzar les comandes utilitzant \u201csudo\u201d a l\u2019inici de les mateixes. **** Creaci\u00f3 D'usuaris Hi ha diverses formes de crear usuaris a un sistema Ubuntu. Depenent del resultat que vulguem aconseguir, de vegades algunes formes seran m\u00e9s \u00f2ptimes que altres. La m\u00e9s simple: interf\u00edcie gr\u00e0fica. Amb la seg\u00fcent comanda, podem instal\u00b7lar l\u2019interf\u00edcie gr\u00e0fica que ens permet crear i esborrar usuaris sense la necessitat d\u2019usar el terminal. Finalment, i despr\u00e9s d\u2019haver escollit la contrasenya, podem incloure l\u2019usuari en algun dels grups existents i seleccionar quins permisos tindr\u00e0. \u201cuseradd \u201d Un forma de crear un usuari amb terminal \u00e9s utilitzar la comanda \u201cuseradd\u201d seguida del nom de l\u2019usuari: Aquesta comanda crea l\u2019usuari \u201cjulia\u201d al sistema, per\u00f2 aquest usuari no tindr\u00e0 cap carpeta d\u2019usuari fins que iniciem sessi\u00f3 per primera vegada amb l\u2019interf\u00edcie gr\u00e0fica. A m\u00e9s la comanda no retorna cap confirmaci\u00f3 de la creaci\u00f3 de l\u2019usuari. \u201cadduser \u201d Una altra forma de crear un usuari amb terminal \u00e9s la comanda \u201cadduser\u201d seguida de l\u2019usuari. Aquesta comanda proporciona m\u00e9s informaci\u00f3 sobre el proc\u00e9s de crear un usuari i, en esc\u00e8ncia, \u00e9s m\u00e9s c\u00f2moda. Sistemes d\u2019arxius i particions Per crear i modificar noves particions Amb la comanda fdisk -l podem llistar tots els dispositius d\u2019emmagatzematge de que disposem per tal de fer particions i altres modificacions. amb la comanda f disk seguida de la ruta al disc que volem modificar, podem entrar al men\u00fa d\u2019opcions que ofereix el sistema per a aquell disc. Es important destacar que qualsevol canvi que fem es registra per\u00f2 no s\u2019aplica fins que el guardem, cosa que veurem ara mateix. Premem \u2018 n \u2019 per crear una nova partici\u00f3, aix\u00f2 ens demanar\u00e0 un seguit d\u2019especificacions per aquesta. Per a una prova simple els valors predeterminats son suficient. El disc \u00e9s de 2GB i hem utilitzat la meitat per fer la prova. Inmediatament despr\u00e9s premem \u2018 w \u2019 per aplicar els canvis (si no volem fer cap altra cosa), ja que tot el que hem fet es guarda en la mem\u00f2ria per\u00f2 no es fa realment fins que no confirmem amb aquesta tecla. Aquest \u00e9s el resultat final de la partici\u00f3 Amb mkfs.ext4 -b 2048 /dev/sdb1 canviem la mida del bloc de 4096 (per defecte) a 2048 per a la nostra partici\u00f3. Crear nom\u00e9s la partici\u00f3 no serveix de res, doncs tenim que montarla en una carpeta. Creem una carpeta particio1 per fer-ho i hi montem la partici\u00f3 amb el sistema d\u2019arxius que seleccionem en aquest cas ext4 amb la seg\u00fcent comanda: mount -t ext4 /ruta/particio /ruta/a/carpeta/montatge Si fem un veurem que s\u2019ha creat un directori anomenat \u201clost+found\u201d aix\u00f2 indica que la partici\u00f3 s\u2019ha montat correctament. Desmontar el disk de la carpeta no elimina els seus arxius doncs fer el montatge nom\u00e9s es una mena de ruta des de la carpeta fins al contingut de la partici\u00f3 del disc. Aix\u00ed doncs, si tornem a montar-lo veurem com els arxius segueixen all\u00ed. el montatge del disc es desfar\u00e0 cada cop que reiniciem el sistema si ho fem nom\u00e9s d\u2019aquesta forma. Per fer-ho permanent hem de modificar el fitxer /etc/fstab. Concretament hem d\u2019afegir una linia que inclogui amb aquest ordre: La ruta de la partici\u00f3 La ruta a la carpeta de moantatge El tipus de sistema d\u2019arxius Els permisos de la partici\u00f3 Si s\u2019ha de fer una c\u00f2pia de seguretat amb dump La prioritat que te el sistema de fitxers en q\u00fcesti\u00f3 per ser comprovat durant l\u2019arrenca Despr\u00e9s del reboot Servidor samba C\u00f2pies de seguretat Conceptes te\u00f2rics S\u2019ha d\u2019establir una bona pol\u00edtica de c\u00f2pies de seguretat per al que cal con\u00e8ixer els seg\u00fcents conceptes respecte als tipus de c\u00f2pies de seguretat: Completes Diferencials Incrementals C\u00f2pies de seguretat completes: Les c\u00f2pies de seguretat completes copien tots els continguts al complet, cosa que fa f\u00e0cil la posterior recuperaci\u00f3 de les dades. Cal considerar que al ser completa ser\u00e0 m\u00e9s lenta de fer i de restaurar. C\u00f2pies de seguretat diferencials: Emmagatzema c\u00f2pies nom\u00e9s dels canvis fets des de la \u00faltima c\u00f2pia completa, per restaurar-la necessitem la \u00faltima c\u00f2pia completa i la \u00faltima diferencial. C\u00f2pies de seguretat incrementals: Guarda la informaci\u00f3 des de la \u00faltima c\u00f2pia qualsevol. Per restaurar necessita la \u00faltima c\u00f2pia completa, la \u00faltima c\u00f2pia diferencial i totes les c\u00f2pies incrementals Programes en Interf\u00edcie Deja-Dup Comandes taula comparativa difer\u00e8ncies fonamentals: cp: \u00e9s una c\u00f2pia simple no intel\u00b7ligent que no mira res i ho c\u00f2pia tot, es fa en local. rsync: \u00e9s una c\u00f2pia intel\u00b7ligent, nom\u00e9s c\u00f2pia els modificats i es pot fer entre m\u00e0quines remotes via SSH. Tamb\u00e9 ha borrat el fitxer adeu, ja que no estava a la c\u00f2pia feta per\u00f2 si a la ruta final (ho ha fet amb l\u2019opci\u00f3 \u2014delete) dd: No \u00e9s pr\u00f2piament per fer c\u00f2pies d\u2019arxius, treballa en local, treballa a nivell de bloc, va b\u00e9 per fer clonacions de discs i particions. No nom\u00e9s c\u00f2pia arxius, tamb\u00e9 metadades, sistema d\u2019arxius, mida dels blocs\u2026 Es pot utilitzar tamb\u00e9 per esborrar arxius definitivament. Primer fem la c\u00f2pia al disc dur. Despr\u00e9s, al montar-lo a la carpeta \u201ccopia_dades_de_dades\u201d apareixen els arxius resultants de la c\u00f2pia (no es mostraven abans ja que el disc no estava muntat, per\u00f2 aix\u00f2 ja s\u2019ha vist a l\u2019apartat de particions) A l\u2019ultima imatge, els hash no s\u00f3n iguals ja que a l\u2019hora de fer la c\u00f2pia hem utilitzat 4M per la velocitat, i alguna cosa haur\u00e0 anat diferent, al refer la c\u00f2pia amb 1M la c\u00f2pia acaba resultant perfecta i els arxius i estructures de dades son iguals resultant en un hash id\u00e8ntic per totes dues particions. Automatitzaci\u00f3 d\u2019scripts i cron i anacron Teoria Difer\u00e8ncies entre anacron i cron En sistemes operatius anteriors funcionaven per separat, ara estan integrats i funcionen de forma conjunta. Serveixen per automatitzar tasques. Veurem quan utilitzar un i l\u2019altre: Anacron : L\u2019utilitzarem quan un ordinador pugue estar apagat, ja que en engegar-se anacron detecta que hi ha una tasca no executada i l\u2019executa. L\u2019utilitzarem tamb\u00e9 quan sigue una automatitzaci\u00f3 general a nivell general i de SO Cron: Quan executem alguna cosa molt concreta a una hora determinada i pensem que l\u2019ordinador estar\u00e0 engegat. Opcions cron: utilitzarem /etc/crontab quan volem executar alguna cosa globalment per tot els usuaris. Quan volem definir alguna cosa espec\u00edfica per algun usuari en particular utilitzarem: crontab -e -u usuari Dintre del directori /etc/cron/ hi ha carpetes preparades. Pr\u00e0ctica En l\u2019exemple seg\u00fcent creem un script per crear un arxiu de forma automatitzada en engegar l\u2019ordinador. Obrim un editor de text ( nano ) per crear un script bash \u201c copia.sh \". Dins l'script, utilitzem una comanda tar per crear un arxiu comprimit ( tar.gz ) del directori Documents . El nom del fitxer cont\u00e9 un timestamp que indica la data i hora d'execuci\u00f3. Guardem l'script i canviem els permisos amb chmod +x copia.sh per fer-lo executable. Verifiquem que el fitxer s'ha creat correctament utilitzant ls . Executem l'script manualment amb ./copia.sh i observem que es genera l'arxiu comprimit al directori indicat, a Escritorio . Editem el fitxer de configuraci\u00f3 de cron ( /etc/crontab ) per programar l'execuci\u00f3 autom\u00e0tica de l'script. Especifiquem que l'script s'executi en una data i hora concreta. Per exemple, a les 12:14 del dia 9 del mes 1 (gener) i el dia de la setmana 4 (dijous). Comprovem que la programaci\u00f3 est\u00e0 configurada i copiem l'script al directori cron.daily per assegurar que s'executi di\u00e0riament si \u00e9s necessari. Conclusi\u00f3 Aquest proc\u00e9s ens permet configurar un sistema autom\u00e0tic de c\u00f2pies de seguretat amb un script d\u2019execuci\u00f3 autom\u00e0tica utilitzant cron.","title":"Sprint2"},{"location":"Sprint2/#sprint2","text":"","title":"Sprint2"},{"location":"Sprint2/#gestio-de-la-informacio-del-sistema-i-administracio","text":"","title":"Gesti\u00f3 de la Informaci\u00f3 del Sistema i Administraci\u00f3"},{"location":"Sprint2/#que-es-un-usuari","text":"Un usuari \u00e9s una entitat l\u00f2gica creada per gestionar els permisos, l'acc\u00e9s i les accions en un sistema operatiu o aplicaci\u00f3. Gr\u00e0ficament no pot treballar m\u00e9s d\u2019un usuari, per\u00f2 amb terminals si.","title":"Qu\u00e8 \u00e9s un usuari?"},{"location":"Sprint2/#que-son-els-grups-i-quina-utilitat-tenen","text":"\u00c9s una col\u00b7lecci\u00f3 d\u2019usuaris que comparteixen permisos i/o privilegis. serveixen per donar/llevar permisos a un grup d\u2019usuaris enlloc de fer-ho un per un. Per exemple, tots els usuaris del grup \u201csudoers\u201d poden utilitzar les comandes utilitzant \u201csudo\u201d a l\u2019inici de les mateixes. ****","title":"Qu\u00e8 son els grups i quina utilitat tenen."},{"location":"Sprint2/#creacio-dusuaris","text":"Hi ha diverses formes de crear usuaris a un sistema Ubuntu. Depenent del resultat que vulguem aconseguir, de vegades algunes formes seran m\u00e9s \u00f2ptimes que altres. La m\u00e9s simple: interf\u00edcie gr\u00e0fica. Amb la seg\u00fcent comanda, podem instal\u00b7lar l\u2019interf\u00edcie gr\u00e0fica que ens permet crear i esborrar usuaris sense la necessitat d\u2019usar el terminal. Finalment, i despr\u00e9s d\u2019haver escollit la contrasenya, podem incloure l\u2019usuari en algun dels grups existents i seleccionar quins permisos tindr\u00e0.","title":"Creaci\u00f3 D'usuaris"},{"location":"Sprint2/#useradd","text":"Un forma de crear un usuari amb terminal \u00e9s utilitzar la comanda \u201cuseradd\u201d seguida del nom de l\u2019usuari: Aquesta comanda crea l\u2019usuari \u201cjulia\u201d al sistema, per\u00f2 aquest usuari no tindr\u00e0 cap carpeta d\u2019usuari fins que iniciem sessi\u00f3 per primera vegada amb l\u2019interf\u00edcie gr\u00e0fica. A m\u00e9s la comanda no retorna cap confirmaci\u00f3 de la creaci\u00f3 de l\u2019usuari.","title":"\u201cuseradd \u201d"},{"location":"Sprint2/#adduser","text":"Una altra forma de crear un usuari amb terminal \u00e9s la comanda \u201cadduser\u201d seguida de l\u2019usuari. Aquesta comanda proporciona m\u00e9s informaci\u00f3 sobre el proc\u00e9s de crear un usuari i, en esc\u00e8ncia, \u00e9s m\u00e9s c\u00f2moda.","title":"\u201cadduser \u201d"},{"location":"Sprint2/#sistemes-darxius-i-particions","text":"","title":"Sistemes d\u2019arxius i particions"},{"location":"Sprint2/#per-crear-i-modificar-noves-particions","text":"Amb la comanda fdisk -l podem llistar tots els dispositius d\u2019emmagatzematge de que disposem per tal de fer particions i altres modificacions. amb la comanda f disk seguida de la ruta al disc que volem modificar, podem entrar al men\u00fa d\u2019opcions que ofereix el sistema per a aquell disc. Es important destacar que qualsevol canvi que fem es registra per\u00f2 no s\u2019aplica fins que el guardem, cosa que veurem ara mateix. Premem \u2018 n \u2019 per crear una nova partici\u00f3, aix\u00f2 ens demanar\u00e0 un seguit d\u2019especificacions per aquesta. Per a una prova simple els valors predeterminats son suficient. El disc \u00e9s de 2GB i hem utilitzat la meitat per fer la prova. Inmediatament despr\u00e9s premem \u2018 w \u2019 per aplicar els canvis (si no volem fer cap altra cosa), ja que tot el que hem fet es guarda en la mem\u00f2ria per\u00f2 no es fa realment fins que no confirmem amb aquesta tecla. Aquest \u00e9s el resultat final de la partici\u00f3 Amb mkfs.ext4 -b 2048 /dev/sdb1 canviem la mida del bloc de 4096 (per defecte) a 2048 per a la nostra partici\u00f3. Crear nom\u00e9s la partici\u00f3 no serveix de res, doncs tenim que montarla en una carpeta. Creem una carpeta particio1 per fer-ho i hi montem la partici\u00f3 amb el sistema d\u2019arxius que seleccionem en aquest cas ext4 amb la seg\u00fcent comanda: mount -t ext4 /ruta/particio /ruta/a/carpeta/montatge Si fem un veurem que s\u2019ha creat un directori anomenat \u201clost+found\u201d aix\u00f2 indica que la partici\u00f3 s\u2019ha montat correctament. Desmontar el disk de la carpeta no elimina els seus arxius doncs fer el montatge nom\u00e9s es una mena de ruta des de la carpeta fins al contingut de la partici\u00f3 del disc. Aix\u00ed doncs, si tornem a montar-lo veurem com els arxius segueixen all\u00ed. el montatge del disc es desfar\u00e0 cada cop que reiniciem el sistema si ho fem nom\u00e9s d\u2019aquesta forma. Per fer-ho permanent hem de modificar el fitxer /etc/fstab. Concretament hem d\u2019afegir una linia que inclogui amb aquest ordre: La ruta de la partici\u00f3 La ruta a la carpeta de moantatge El tipus de sistema d\u2019arxius Els permisos de la partici\u00f3 Si s\u2019ha de fer una c\u00f2pia de seguretat amb dump La prioritat que te el sistema de fitxers en q\u00fcesti\u00f3 per ser comprovat durant l\u2019arrenca Despr\u00e9s del reboot","title":"Per crear i modificar noves particions"},{"location":"Sprint2/#servidor-samba","text":"","title":"Servidor samba"},{"location":"Sprint2/#copies-de-seguretat","text":"","title":"C\u00f2pies de seguretat"},{"location":"Sprint2/#conceptes-teorics","text":"S\u2019ha d\u2019establir una bona pol\u00edtica de c\u00f2pies de seguretat per al que cal con\u00e8ixer els seg\u00fcents conceptes respecte als tipus de c\u00f2pies de seguretat: Completes Diferencials Incrementals","title":"Conceptes te\u00f2rics"},{"location":"Sprint2/#copies-de-seguretat-completes","text":"Les c\u00f2pies de seguretat completes copien tots els continguts al complet, cosa que fa f\u00e0cil la posterior recuperaci\u00f3 de les dades. Cal considerar que al ser completa ser\u00e0 m\u00e9s lenta de fer i de restaurar.","title":"C\u00f2pies de seguretat completes:"},{"location":"Sprint2/#copies-de-seguretat-diferencials","text":"Emmagatzema c\u00f2pies nom\u00e9s dels canvis fets des de la \u00faltima c\u00f2pia completa, per restaurar-la necessitem la \u00faltima c\u00f2pia completa i la \u00faltima diferencial.","title":"C\u00f2pies de seguretat diferencials:"},{"location":"Sprint2/#copies-de-seguretat-incrementals","text":"Guarda la informaci\u00f3 des de la \u00faltima c\u00f2pia qualsevol. Per restaurar necessita la \u00faltima c\u00f2pia completa, la \u00faltima c\u00f2pia diferencial i totes les c\u00f2pies incrementals","title":"C\u00f2pies de seguretat incrementals:"},{"location":"Sprint2/#programes-en-interficie","text":"Deja-Dup","title":"Programes en Interf\u00edcie"},{"location":"Sprint2/#comandes","text":"taula comparativa difer\u00e8ncies fonamentals: cp: \u00e9s una c\u00f2pia simple no intel\u00b7ligent que no mira res i ho c\u00f2pia tot, es fa en local. rsync: \u00e9s una c\u00f2pia intel\u00b7ligent, nom\u00e9s c\u00f2pia els modificats i es pot fer entre m\u00e0quines remotes via SSH. Tamb\u00e9 ha borrat el fitxer adeu, ja que no estava a la c\u00f2pia feta per\u00f2 si a la ruta final (ho ha fet amb l\u2019opci\u00f3 \u2014delete) dd: No \u00e9s pr\u00f2piament per fer c\u00f2pies d\u2019arxius, treballa en local, treballa a nivell de bloc, va b\u00e9 per fer clonacions de discs i particions. No nom\u00e9s c\u00f2pia arxius, tamb\u00e9 metadades, sistema d\u2019arxius, mida dels blocs\u2026 Es pot utilitzar tamb\u00e9 per esborrar arxius definitivament. Primer fem la c\u00f2pia al disc dur. Despr\u00e9s, al montar-lo a la carpeta \u201ccopia_dades_de_dades\u201d apareixen els arxius resultants de la c\u00f2pia (no es mostraven abans ja que el disc no estava muntat, per\u00f2 aix\u00f2 ja s\u2019ha vist a l\u2019apartat de particions) A l\u2019ultima imatge, els hash no s\u00f3n iguals ja que a l\u2019hora de fer la c\u00f2pia hem utilitzat 4M per la velocitat, i alguna cosa haur\u00e0 anat diferent, al refer la c\u00f2pia amb 1M la c\u00f2pia acaba resultant perfecta i els arxius i estructures de dades son iguals resultant en un hash id\u00e8ntic per totes dues particions.","title":"Comandes"},{"location":"Sprint2/#automatitzacio-dscripts-i-cron-i-anacron","text":"","title":"Automatitzaci\u00f3 d\u2019scripts i cron i anacron"},{"location":"Sprint2/#teoria","text":"","title":"Teoria"},{"location":"Sprint2/#diferencies-entre-anacron-i-cron","text":"En sistemes operatius anteriors funcionaven per separat, ara estan integrats i funcionen de forma conjunta. Serveixen per automatitzar tasques. Veurem quan utilitzar un i l\u2019altre: Anacron : L\u2019utilitzarem quan un ordinador pugue estar apagat, ja que en engegar-se anacron detecta que hi ha una tasca no executada i l\u2019executa. L\u2019utilitzarem tamb\u00e9 quan sigue una automatitzaci\u00f3 general a nivell general i de SO Cron: Quan executem alguna cosa molt concreta a una hora determinada i pensem que l\u2019ordinador estar\u00e0 engegat. Opcions cron: utilitzarem /etc/crontab quan volem executar alguna cosa globalment per tot els usuaris. Quan volem definir alguna cosa espec\u00edfica per algun usuari en particular utilitzarem: crontab -e -u usuari Dintre del directori /etc/cron/ hi ha carpetes preparades.","title":"Difer\u00e8ncies entre anacron i cron"},{"location":"Sprint2/#practica","text":"En l\u2019exemple seg\u00fcent creem un script per crear un arxiu de forma automatitzada en engegar l\u2019ordinador. Obrim un editor de text ( nano ) per crear un script bash \u201c copia.sh \". Dins l'script, utilitzem una comanda tar per crear un arxiu comprimit ( tar.gz ) del directori Documents . El nom del fitxer cont\u00e9 un timestamp que indica la data i hora d'execuci\u00f3. Guardem l'script i canviem els permisos amb chmod +x copia.sh per fer-lo executable. Verifiquem que el fitxer s'ha creat correctament utilitzant ls . Executem l'script manualment amb ./copia.sh i observem que es genera l'arxiu comprimit al directori indicat, a Escritorio . Editem el fitxer de configuraci\u00f3 de cron ( /etc/crontab ) per programar l'execuci\u00f3 autom\u00e0tica de l'script. Especifiquem que l'script s'executi en una data i hora concreta. Per exemple, a les 12:14 del dia 9 del mes 1 (gener) i el dia de la setmana 4 (dijous). Comprovem que la programaci\u00f3 est\u00e0 configurada i copiem l'script al directori cron.daily per assegurar que s'executi di\u00e0riament si \u00e9s necessari.","title":"Pr\u00e0ctica"},{"location":"Sprint2/#conclusio","text":"Aquest proc\u00e9s ens permet configurar un sistema autom\u00e0tic de c\u00f2pies de seguretat amb un script d\u2019execuci\u00f3 autom\u00e0tica utilitzant cron.","title":"Conclusi\u00f3"},{"location":"Sprint3/","text":"Sprint 3 1. Instal\u00b7laci\u00f3 domini LDAP Primer canviem el hostname i afegim el nom del domini que estarem utilitzant durant la manipulaic\u00f3 del ldap. Ara, instal\u00b7lem els recursos necessaris per utilitzar l\u2019ldap i configurem una contrasenya. Per fer la base del domini hi ha dos opcions: fer-ho a trav\u00e9s dels arxius base .ldif fer-ho a trav\u00e9s d\u2019una comanda (la que utilitzarem nosaltres) Durant el proc\u00e9s seleccionem gaireb\u00e9 totes les opcions per defecte, ja que per al que volem fer, \u00e9s m\u00e9s que suficient. Finalment veiem com amb la comanda slapcat sen\u2019s mostra el nou domini i la seva organitzaci\u00f3. 2. Unir equips al domini Crearem una unitat organitzativa, que es un contenidor dins del directori per guardar objectes com: usuaris i grups. Creem un grup anomenat alumnes per a poder posar els usuaris creats i posem els usuaris que volem afegir a la part inferior. Ara configurem el fitxer de l\u2019usuari per a poder utilitzar-lo en la maquina client. -c fa que el ldapadd continu\u00ef executant-se encara que es produeixin errors. -x utilitza autenticaci\u00f3 simple en lloc de SASL (Simple Authentication and Security Layer). -D indica el Distinguished Name (DN) de l'usuari que realitza l'operaci\u00f3, en aquest cas, l'usuari administrador. -W demana la contrasenya de l'usuari especificat amb -D . Aix\u00f2 \u00e9s m\u00e9s segur que incloure la contrasenya directament a la comanda com passaria amb la -w . Executem tots els canvis i verifiquem que s\u2019han enregistrat correctament Un cop a la maquina client Instal\u00b7lem el \u201cnscd\u201d: un dimoni (programa en segon pla) que s\u2019encarrega d\u2019emmagatzemar la mem\u00f2ria cau(cache). Instal\u00b7lem tamb\u00e9 una llibreria que ens permetr\u00e0 fer la connexi\u00f3 al domini \u201cldap\u201d des del client amb apt install libnss-ldap . Fiquem la \u201cip\u201d del server (sense la \u201ci\u201d i en 2 barres) per conectar-nos. Podem anar seleccionant tamb\u00e9 les opcions per defecte, que ja en van b\u00e9. Aqu\u00ed haurem d\u2019indicar el domini personalitzat que hem escollit abans i despr\u00e9s introdu\u00efr la contrasenya. Instal\u00b7lem apt install libpam-ldap . Si el client no es pot validar al domini, apart de comprovar els arxius de configuraci\u00f3 que es veuran a continuaci\u00f3 tambe farem sempre la seg\u00fcent comanda: dpkg-reconfigure ldap-auth-config . I un cop m\u00e9s podem usar les opcions per defecte. Modifiquem la configuraci\u00f3 de Name Service Switch (NSS) per incloure ldap abans d'altres m\u00e8todes de resoluci\u00f3 ( compat , files , systemd , sss ). Ara l'autenticaci\u00f3 i la gesti\u00f3 d'usuaris es basar\u00e0 primer en LDAP abans de consultar altres mecanismes locals. Aix\u00f2 permet que usuaris gestionats per LDAP puguin autenticar-se sense necessitat d'estar registrats localment a la m\u00e0quina. S'han afegit m\u00f2duls PAM per a pam_ldap.so i pam_unix.so , prioritzant l'autenticaci\u00f3 mitjan\u00e7ant LDAP. Es poden establir regles espec\u00edfiques com use_authtok i try_first_pass , que permeten reutilitzar credencials introdu\u00efdes pr\u00e8viament per a evitar haver d'introduir-les diverses vegades. S'ha afegit pam_mkhomedir.so skel=/etc/skel umask=077 , que assegura que es cre\u00ef un directori d'inici ( home ) per als usuaris que s'autentiquen mitjan\u00e7ant LDAP. Si un usuari LDAP inicia sessi\u00f3 per primer cop, el sistema crear\u00e0 autom\u00e0ticament el seu directori /home/usuari amb permisos restringits ( umask=077 ), evitant que altres usuaris puguin accedir als seus fitxers. Facilita que usuaris LDAP (o altres comptes no definits localment) puguin iniciar sessi\u00f3 introduint el seu nom d'usuari i contrasenya. Procedim a conectar-nos amb l\u2019usuari que hem creat per verificar el funcionament: 3. Gesti\u00f3 del domini LDAP Un cop tenim un domini creat hem de ser capa\u00e7os de gestinar-lo, ja sigui afegint, eliminant o modificant par\u00e0metres del mateix. Per fer-ho hem eliminat l\u2019antiga base i n\u2019hem creat una de nova amb dpkg-reconfigure slapd Un breu video per mostra el proc\u00e9s de configuraci\u00f3 pas per pas: dpkg-reconfigure.mp4 ldapsearch Una de les coses que podem fer per gestionar la nostra base de dades \u00e9s filtrar per \u201cuid\u201d, una de les entrades que, en principi, ha de ser \u00fanica per a cada entrada. Aix\u00f3 ens mostra totes les dades que hi ha assignades a l\u2019entrada en q\u00fcesti\u00f3. Tamb\u00e9 podem filtrar per coses m\u00e9s concretes. Podem, per exemple, filtrar per tots aquells usuaris que disposen d\u2019un objecte \u201cmail\u201d que utilitzi el domini \u201cexample.com\u201d. Si hi hagu\u00e9s objectes \u201cmail\u201d amb altres dominis no es mostrarien despr\u00e9s de fer aquesta comanda. A m\u00e9s, podem fer una cerca que ens mostre nom\u00e9s els objectes que ens interessen: En aquesta, hem afegit al final de la comanda: \u201cdn\u201d \u201ccn\u201d i \u201cmail\u201d com als \u00fanics camps que volem rebre de la cerca. Afegir dades Primera opci\u00f3 per afegir dades Afegim la base de dades al domini, que afegeix dos \u201cou\u201d o unitats organitzatives: una per als grup i una altra per als usuaris. Tamb\u00e9 afegeix m\u00faltiples entrades per a cada grup. Segona opci\u00f3 per afegir dades En aquest cas hem afegit manualment una ou a la base de dades, que es mostra juntament amb les altres dues anteriors. Com a resultat, obtenim una nova \u201cou\u201d. Ara, imaginem que les dades que hem afegit amb la segona opci\u00f3 han estat incorrectes i volem modificar-les. Podem, per exemple, cambiar \u201cl\u2019ou\u201d de manera que prova ara forma part de la \u201cou\u201d \u201cgroups\u201d. Si per exemple volem cambiar el nom de la ou \u201cprova\u201d a \u201cprovahola\u201d ho hem de fer de la seg\u00fcent forma: Aquests s\u00f3n processos que veurem m\u00e9s avant a l\u2019apartat Per Modificar Dades Esborrar dades Per esborra dades utilitzarem el seg\u00fcent proc\u00e9s: Despr\u00e9s d\u2019eliminar ja no tenim l\u2019entrada: Per modificar dades Modificar les dades \u00e9s un proc\u00e9s des del que podem afegir eliminar i modificar totes les dades sense necessitat de utilitzar una comanda individual per a cada objecte. Podem fer un fitxer .ldif per a cada objecte o dada que volem modificar o podem fer-ne un que les inclogue totes. Primer hem intentat esborrar l\u2019atribut \u201csn\u201d. Aquest ha donat error ja que el \u201csn\u201d \u00e9s un atribut obligatori i no podem deixar a \u201cabergin\u201d sense \u201csn\u201d Aix\u00ed que farem altres proves El contingut del fitxer Com a resultat, \u201cabergin\u201d t\u00e9 ara un hotmail i el seu \u201chomeDirectory\u201d ha cambiat de \u201c/home/abergin\u201d a \u201c/home/abergin0\u201d Si volem eliminar el seu mail: Ara abergin ja no t\u00e9 mail. Entorn Gr\u00e0fic - Apache Studio Per utilitzar Apache Studio per crear i modificar usuaris priemer hem d\u2019instalar-lo. Podem fer-ho amb la seg\u00fcent comanda: wget [https://downloads.apache.org/directory/studio/2.0.0.v20210717-M17/ApacheDirectoryStudio-2.0.0.v20210717-M17-linux.gtk.x86_64.tar.gz](https://downloads.apache.org/directory/studio/2.0.0.v20210717-M17/ApacheDirectoryStudio-2.0.0.v20210717-M17-linux.gtk.x86_64.tar.gz) tar -xvzf ApacheDirectoryStudio-2.0.0.v20210717-M17-linux.gtk.x86_64.tar.gz Creem un enlla\u00e7 simb\u00f2lic para accedir f\u00e0cilment Hem d\u2019instal\u00b7lar tamb\u00e9 el requisits per executar apache studio, ja que la MV no els t\u00e9. Obrim l\u2019aplicaci\u00f3 El seg\u00fcent pas \u00e9s crear una nova connexi\u00f3 amb el servidor, per aix\u00f2 ens dirigirem a File\u2192 *New *\u2192 LDAP Connection . Deixem \u201cSimple Authentication\u201d i emplenem les dades necess\u00e0ries amb el nostre domini i la seva contrasenya. Ara ja tenim la connexi\u00f3, per\u00f2 hem d\u2019afegir m\u00e9s entrades (Usuaris, Persones, etc) cadascuna de les quals pot tenir els seus propis atributs. A continuaci\u00f3 podem fer dues coses: Afegir una nova entrada \u201calu2\u201d Introdu\u00efm el nostre domini, que \u00e9s a trav\u00e9s del que ens conectarem a l\u2019usuari Ens demana afegir les classes d\u2019objecte, introdu\u00efm les que es poden veure a continuaci\u00f3 a l\u2019apartat dret (concretament a \u201cSelected object classes\u201d). Com a parent tornem a introdu\u00efr el nostre domini i, a l\u2019opci\u00f3 \u201cRDN\u201d, escollim \u201ccn\u201d = \u201calu2\u201d. Aix\u00f2 \u00e9s l\u2019identificador propi de l\u2019usuari que estem creant i el que realment utilitzarem per conectar-nos a trav\u00e9s d\u2019ldap En cas que sigui necessari, afegim m\u00e9s atributs per al nou usuari (o entrada) com: mail, HomeDirectory, etc. Haur\u00edem d\u2019afegir m\u00e9s atributs, per anar b\u00e9 almenys els mateixos que t\u00e9 \u201calu1\u201d. Un cop creat l\u2019usuari ja haur\u00edem de ser capa\u00e7os de conectar-nos a traves d\u2019ldap al terminal Copiar l\u2019entrada ja existent de \u201calu1\u201d i cambiar les dades necess\u00e0ries En aquest cas nom\u00e9s hem de canviar els atributs essencials d\u2019\u201dalu1\u201d a l\u2019hora de copiar l\u2019entrada. Primer la copiem. Desp\u0155es fariem \u201cPaste\u201d i ens apareixeria aquesta opci\u00f3: Seleccionem \u201cRename entry and continue\u201d i canviem el uid, jo he ficat \u201calu2\u201d. Aix\u00ed ha quedat \u201calu2\u201d despr\u00e9s de copiar-la i fer els canvis a \u201csn, cn, homeDirectory, uid, uidNumber\u201d: Un cop afegit el\u2019usuari ja podem conectar-nos amb \u201calu2\u201d. Servidor NFS Tants servidor samba com NFS serveixen per compratir recursos. Permet fer auth en usuari pero amb kerberos, per\u00f2 \u00e9s tant dificil que es millor utilitzar samba. Preparem la carpeta on es concectaran windows i ubuntu Afegim una comanda per indicar la carpeta compartida","title":"Sprint3"},{"location":"Sprint3/#sprint-3","text":"","title":"Sprint 3"},{"location":"Sprint3/#1-installacio-domini-ldap","text":"Primer canviem el hostname i afegim el nom del domini que estarem utilitzant durant la manipulaic\u00f3 del ldap. Ara, instal\u00b7lem els recursos necessaris per utilitzar l\u2019ldap i configurem una contrasenya. Per fer la base del domini hi ha dos opcions: fer-ho a trav\u00e9s dels arxius base .ldif fer-ho a trav\u00e9s d\u2019una comanda (la que utilitzarem nosaltres) Durant el proc\u00e9s seleccionem gaireb\u00e9 totes les opcions per defecte, ja que per al que volem fer, \u00e9s m\u00e9s que suficient. Finalment veiem com amb la comanda slapcat sen\u2019s mostra el nou domini i la seva organitzaci\u00f3.","title":"1. Instal\u00b7laci\u00f3 domini LDAP"},{"location":"Sprint3/#2-unir-equips-al-domini","text":"Crearem una unitat organitzativa, que es un contenidor dins del directori per guardar objectes com: usuaris i grups. Creem un grup anomenat alumnes per a poder posar els usuaris creats i posem els usuaris que volem afegir a la part inferior. Ara configurem el fitxer de l\u2019usuari per a poder utilitzar-lo en la maquina client. -c fa que el ldapadd continu\u00ef executant-se encara que es produeixin errors. -x utilitza autenticaci\u00f3 simple en lloc de SASL (Simple Authentication and Security Layer). -D indica el Distinguished Name (DN) de l'usuari que realitza l'operaci\u00f3, en aquest cas, l'usuari administrador. -W demana la contrasenya de l'usuari especificat amb -D . Aix\u00f2 \u00e9s m\u00e9s segur que incloure la contrasenya directament a la comanda com passaria amb la -w . Executem tots els canvis i verifiquem que s\u2019han enregistrat correctament","title":"2. Unir equips al domini"},{"location":"Sprint3/#un-cop-a-la-maquina-client","text":"Instal\u00b7lem el \u201cnscd\u201d: un dimoni (programa en segon pla) que s\u2019encarrega d\u2019emmagatzemar la mem\u00f2ria cau(cache). Instal\u00b7lem tamb\u00e9 una llibreria que ens permetr\u00e0 fer la connexi\u00f3 al domini \u201cldap\u201d des del client amb apt install libnss-ldap . Fiquem la \u201cip\u201d del server (sense la \u201ci\u201d i en 2 barres) per conectar-nos. Podem anar seleccionant tamb\u00e9 les opcions per defecte, que ja en van b\u00e9. Aqu\u00ed haurem d\u2019indicar el domini personalitzat que hem escollit abans i despr\u00e9s introdu\u00efr la contrasenya. Instal\u00b7lem apt install libpam-ldap . Si el client no es pot validar al domini, apart de comprovar els arxius de configuraci\u00f3 que es veuran a continuaci\u00f3 tambe farem sempre la seg\u00fcent comanda: dpkg-reconfigure ldap-auth-config . I un cop m\u00e9s podem usar les opcions per defecte. Modifiquem la configuraci\u00f3 de Name Service Switch (NSS) per incloure ldap abans d'altres m\u00e8todes de resoluci\u00f3 ( compat , files , systemd , sss ). Ara l'autenticaci\u00f3 i la gesti\u00f3 d'usuaris es basar\u00e0 primer en LDAP abans de consultar altres mecanismes locals. Aix\u00f2 permet que usuaris gestionats per LDAP puguin autenticar-se sense necessitat d'estar registrats localment a la m\u00e0quina. S'han afegit m\u00f2duls PAM per a pam_ldap.so i pam_unix.so , prioritzant l'autenticaci\u00f3 mitjan\u00e7ant LDAP. Es poden establir regles espec\u00edfiques com use_authtok i try_first_pass , que permeten reutilitzar credencials introdu\u00efdes pr\u00e8viament per a evitar haver d'introduir-les diverses vegades. S'ha afegit pam_mkhomedir.so skel=/etc/skel umask=077 , que assegura que es cre\u00ef un directori d'inici ( home ) per als usuaris que s'autentiquen mitjan\u00e7ant LDAP. Si un usuari LDAP inicia sessi\u00f3 per primer cop, el sistema crear\u00e0 autom\u00e0ticament el seu directori /home/usuari amb permisos restringits ( umask=077 ), evitant que altres usuaris puguin accedir als seus fitxers. Facilita que usuaris LDAP (o altres comptes no definits localment) puguin iniciar sessi\u00f3 introduint el seu nom d'usuari i contrasenya. Procedim a conectar-nos amb l\u2019usuari que hem creat per verificar el funcionament:","title":"Un cop a la maquina client"},{"location":"Sprint3/#3-gestio-del-domini-ldap","text":"Un cop tenim un domini creat hem de ser capa\u00e7os de gestinar-lo, ja sigui afegint, eliminant o modificant par\u00e0metres del mateix. Per fer-ho hem eliminat l\u2019antiga base i n\u2019hem creat una de nova amb dpkg-reconfigure slapd Un breu video per mostra el proc\u00e9s de configuraci\u00f3 pas per pas: dpkg-reconfigure.mp4","title":"3. Gesti\u00f3 del domini LDAP"},{"location":"Sprint3/#ldapsearch","text":"Una de les coses que podem fer per gestionar la nostra base de dades \u00e9s filtrar per \u201cuid\u201d, una de les entrades que, en principi, ha de ser \u00fanica per a cada entrada. Aix\u00f3 ens mostra totes les dades que hi ha assignades a l\u2019entrada en q\u00fcesti\u00f3. Tamb\u00e9 podem filtrar per coses m\u00e9s concretes. Podem, per exemple, filtrar per tots aquells usuaris que disposen d\u2019un objecte \u201cmail\u201d que utilitzi el domini \u201cexample.com\u201d. Si hi hagu\u00e9s objectes \u201cmail\u201d amb altres dominis no es mostrarien despr\u00e9s de fer aquesta comanda. A m\u00e9s, podem fer una cerca que ens mostre nom\u00e9s els objectes que ens interessen: En aquesta, hem afegit al final de la comanda: \u201cdn\u201d \u201ccn\u201d i \u201cmail\u201d com als \u00fanics camps que volem rebre de la cerca.","title":"ldapsearch"},{"location":"Sprint3/#afegir-dades","text":"","title":"Afegir dades"},{"location":"Sprint3/#primera-opcio-per-afegir-dades","text":"Afegim la base de dades al domini, que afegeix dos \u201cou\u201d o unitats organitzatives: una per als grup i una altra per als usuaris. Tamb\u00e9 afegeix m\u00faltiples entrades per a cada grup.","title":"Primera opci\u00f3 per afegir dades"},{"location":"Sprint3/#segona-opcio-per-afegir-dades","text":"En aquest cas hem afegit manualment una ou a la base de dades, que es mostra juntament amb les altres dues anteriors. Com a resultat, obtenim una nova \u201cou\u201d. Ara, imaginem que les dades que hem afegit amb la segona opci\u00f3 han estat incorrectes i volem modificar-les. Podem, per exemple, cambiar \u201cl\u2019ou\u201d de manera que prova ara forma part de la \u201cou\u201d \u201cgroups\u201d. Si per exemple volem cambiar el nom de la ou \u201cprova\u201d a \u201cprovahola\u201d ho hem de fer de la seg\u00fcent forma: Aquests s\u00f3n processos que veurem m\u00e9s avant a l\u2019apartat Per Modificar Dades","title":"Segona opci\u00f3 per afegir dades"},{"location":"Sprint3/#esborrar-dades","text":"Per esborra dades utilitzarem el seg\u00fcent proc\u00e9s: Despr\u00e9s d\u2019eliminar ja no tenim l\u2019entrada:","title":"Esborrar dades"},{"location":"Sprint3/#per-modificar-dades","text":"Modificar les dades \u00e9s un proc\u00e9s des del que podem afegir eliminar i modificar totes les dades sense necessitat de utilitzar una comanda individual per a cada objecte. Podem fer un fitxer .ldif per a cada objecte o dada que volem modificar o podem fer-ne un que les inclogue totes. Primer hem intentat esborrar l\u2019atribut \u201csn\u201d. Aquest ha donat error ja que el \u201csn\u201d \u00e9s un atribut obligatori i no podem deixar a \u201cabergin\u201d sense \u201csn\u201d Aix\u00ed que farem altres proves El contingut del fitxer Com a resultat, \u201cabergin\u201d t\u00e9 ara un hotmail i el seu \u201chomeDirectory\u201d ha cambiat de \u201c/home/abergin\u201d a \u201c/home/abergin0\u201d Si volem eliminar el seu mail: Ara abergin ja no t\u00e9 mail.","title":"Per modificar dades"},{"location":"Sprint3/#entorn-grafic-apache-studio","text":"Per utilitzar Apache Studio per crear i modificar usuaris priemer hem d\u2019instalar-lo. Podem fer-ho amb la seg\u00fcent comanda: wget [https://downloads.apache.org/directory/studio/2.0.0.v20210717-M17/ApacheDirectoryStudio-2.0.0.v20210717-M17-linux.gtk.x86_64.tar.gz](https://downloads.apache.org/directory/studio/2.0.0.v20210717-M17/ApacheDirectoryStudio-2.0.0.v20210717-M17-linux.gtk.x86_64.tar.gz) tar -xvzf ApacheDirectoryStudio-2.0.0.v20210717-M17-linux.gtk.x86_64.tar.gz Creem un enlla\u00e7 simb\u00f2lic para accedir f\u00e0cilment Hem d\u2019instal\u00b7lar tamb\u00e9 el requisits per executar apache studio, ja que la MV no els t\u00e9. Obrim l\u2019aplicaci\u00f3 El seg\u00fcent pas \u00e9s crear una nova connexi\u00f3 amb el servidor, per aix\u00f2 ens dirigirem a File\u2192 *New *\u2192 LDAP Connection . Deixem \u201cSimple Authentication\u201d i emplenem les dades necess\u00e0ries amb el nostre domini i la seva contrasenya. Ara ja tenim la connexi\u00f3, per\u00f2 hem d\u2019afegir m\u00e9s entrades (Usuaris, Persones, etc) cadascuna de les quals pot tenir els seus propis atributs. A continuaci\u00f3 podem fer dues coses:","title":"Entorn Gr\u00e0fic - Apache Studio"},{"location":"Sprint3/#afegir-una-nova-entrada-alu2","text":"Introdu\u00efm el nostre domini, que \u00e9s a trav\u00e9s del que ens conectarem a l\u2019usuari Ens demana afegir les classes d\u2019objecte, introdu\u00efm les que es poden veure a continuaci\u00f3 a l\u2019apartat dret (concretament a \u201cSelected object classes\u201d). Com a parent tornem a introdu\u00efr el nostre domini i, a l\u2019opci\u00f3 \u201cRDN\u201d, escollim \u201ccn\u201d = \u201calu2\u201d. Aix\u00f2 \u00e9s l\u2019identificador propi de l\u2019usuari que estem creant i el que realment utilitzarem per conectar-nos a trav\u00e9s d\u2019ldap En cas que sigui necessari, afegim m\u00e9s atributs per al nou usuari (o entrada) com: mail, HomeDirectory, etc. Haur\u00edem d\u2019afegir m\u00e9s atributs, per anar b\u00e9 almenys els mateixos que t\u00e9 \u201calu1\u201d. Un cop creat l\u2019usuari ja haur\u00edem de ser capa\u00e7os de conectar-nos a traves d\u2019ldap al terminal","title":"Afegir una nova entrada \u201calu2\u201d"},{"location":"Sprint3/#copiar-lentrada-ja-existent-de-alu1-i-cambiar-les-dades-necessaries","text":"En aquest cas nom\u00e9s hem de canviar els atributs essencials d\u2019\u201dalu1\u201d a l\u2019hora de copiar l\u2019entrada. Primer la copiem. Desp\u0155es fariem \u201cPaste\u201d i ens apareixeria aquesta opci\u00f3: Seleccionem \u201cRename entry and continue\u201d i canviem el uid, jo he ficat \u201calu2\u201d. Aix\u00ed ha quedat \u201calu2\u201d despr\u00e9s de copiar-la i fer els canvis a \u201csn, cn, homeDirectory, uid, uidNumber\u201d: Un cop afegit el\u2019usuari ja podem conectar-nos amb \u201calu2\u201d.","title":"Copiar l\u2019entrada ja existent de \u201calu1\u201d i cambiar les dades necess\u00e0ries"},{"location":"Sprint3/#servidor-nfs","text":"Tants servidor samba com NFS serveixen per compratir recursos. Permet fer auth en usuari pero amb kerberos, per\u00f2 \u00e9s tant dificil que es millor utilitzar samba. Preparem la carpeta on es concectaran windows i ubuntu Afegim una comanda per indicar la carpeta compartida","title":"Servidor NFS"}]}